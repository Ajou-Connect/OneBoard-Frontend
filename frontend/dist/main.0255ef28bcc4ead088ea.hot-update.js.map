{"version":3,"file":"main.0255ef28bcc4ead088ea.hot-update.js","sources":["/mnt/f/SW_Capstone/frontend/src/Pages/LecturePages/Assignment/UpdateAssignment.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport moment from 'moment';\r\nimport axios from 'axios';\r\nimport palette from '../../../lib/styles/palette';\r\nimport Button from '../../../Component/common/Button';\r\nimport { withRouter } from 'react-router';\r\nimport styled from 'styled-components';\r\nimport ReactQuill from 'react-quill';\r\nimport 'react-quill/dist/quill.snow.css';\r\nimport 'antd/dist/antd.css';\r\nimport { DatePicker, Space } from 'antd';\r\n\r\nconst { RangePicker } = DatePicker;\r\nconst TitleInput = styled.input`\r\n  font-size: 2rem;\r\n  outline: none;\r\n  padding-bottom: 0.5rem;\r\n  border: none;\r\n  border-bottom: 1px solid ${palette.gray[4]};\r\n  margin-bottom: 2rem;\r\n  margin-top: 10px;\r\n  width: 100%;\r\n`;\r\n\r\nconst WriteAcitonButtonBlock = styled.div`\r\n  margin-top: 3rem;\r\n  margin-bottom: 3rem;\r\n  display: flex;\r\n  button + button {\r\n    margin-left: 0.5rem;\r\n  }\r\n`;\r\n\r\nconst StyledButton = styled(Button)`\r\n  height: 2.125rem;\r\n  & + & {\r\n    margin-left: 0.5rem;\r\n  }\r\n`;\r\n\r\nconst ScoreInput = styled.input`\r\n  margin: 5px 0px;\r\n  border-radius: 3px;\r\n  height: 31.6px;\r\n  border: 1px solid #d9d9d9;\r\n  padding: 0px 10px;\r\n  &:focus {\r\n    border: 1px solid #40a9ff;\r\n    box-shadow: 0 0 0 2px #1890ff 20%;\r\n    outline: 0;\r\n  }\r\n  &::-webkit-outer-spin-button,\r\n  &::-webkit-inner-spin-button {\r\n    -webkit-appearance: none;\r\n    margin: 0;\r\n  }\r\n`;\r\n\r\nconst ListContainer = styled.div`\r\n  background-color: white;\r\n  border-radius: 10px;\r\n  padding: 15px;\r\n  margin: 0 auto;\r\n  width: 80%;\r\n  box-shadow: 0 5px 5px 0 #eeeeee;\r\n`;\r\nconst Container = styled.div`\r\n  width: 97%;\r\n  display: block;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin: 10px auto;\r\n  padding: 0 20px;\r\n  margin-bottom: 50px;\r\n`;\r\n\r\nconst UpdateAssignment = ({ history, match }) => {\r\n  const [title, setTitle] = useState('');\r\n  const [content, setContent] = useState('');\r\n  const [period, setPeriod] = useState('');\r\n  const [files, setFiles] = useState('');\r\n  const [exposeDt, setExposeDt] = useState('');\r\n  const [score, setScore] = useState(0);\r\n\r\n  const lectureId = match.params.lectureId;\r\n  const assignmentId = match.params.assignmentId;\r\n  const user = JSON.parse(localStorage.userInfo);\r\n  const userType = user.userType;\r\n  const [assignmentScore, setAssignmentScore] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchUpdateAssignment = async () => {\r\n      try {\r\n        await axios\r\n          .get(`/lecture/${lectureId}/assignment/` + assignmentId)\r\n          .then((res) => {\r\n            const result = res.data.data;\r\n            setTitle(result.title);\r\n            setContent(result.content);\r\n            setAssignmentScore(result.score);\r\n            console.log(result);\r\n          })\r\n          .catch((e) => {\r\n            console.log(e);\r\n          });\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    };\r\n    fetchUpdateAssignment();\r\n  }, []);\r\n\r\n  const getTitle = (e) => {\r\n    setTitle(e.target.value);\r\n    console.log(title);\r\n  };\r\n\r\n  const onChangePeriod = (e, dateString) => {\r\n    setPeriod({\r\n      ...period,\r\n      start: dateString[0],\r\n      end: dateString[1],\r\n    });\r\n  };\r\n\r\n  const onSubmit = () => {\r\n    console.log('title : ' + title);\r\n    console.log('content : ' + content);\r\n    const formData = new FormData();\r\n    formData.append('title', title);\r\n    formData.append('content', content);\r\n    formData.append('file', files);\r\n    formData.append('startDt', period.start);\r\n    formData.append('endDt', period.end);\r\n    formData.append('score', score);\r\n    formData.append('exposeDt', exposeDt);\r\n    axios\r\n      .put(`/lecture/${lectureId}/assignment/` + assignmentId, formData, {\r\n        headers: { 'Content-Type': 'multipart/form-data' },\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        console.log(score);\r\n        return (window.location.href = `/Main/Lecture/${userType}/${lectureId}/Assignment`);\r\n      })\r\n      .catch((e) => {\r\n        console.log(e);\r\n      });\r\n  };\r\n\r\n  const onCancel = () => {\r\n    history.goback();\r\n  };\r\n\r\n  const handleText = (editor) => {\r\n    console.log(editor);\r\n    setContent(editor);\r\n  };\r\n\r\n  const onFileChange = (e) => {\r\n    e.preventDefault();\r\n    console.log(e.target.files);\r\n    setFiles(e.target.files[0]);\r\n  };\r\n\r\n  const modules = {\r\n    toolbar: [\r\n      //[{ 'font': [] }],\r\n      [{ header: [1, 2, false] }],\r\n      ['bold', 'italic', 'underline', 'strike', 'blockquote'],\r\n      [{ list: 'ordered' }, { list: 'bullet' }, { indent: '-1' }, { indent: '+1' }],\r\n      ['link', 'image'],\r\n      [{ align: [] }, { color: [] }, { background: [] }], // dropdown with defaults from theme\r\n      ['clean'],\r\n    ],\r\n  };\r\n\r\n  const format = [\r\n    'header',\r\n    'bold',\r\n    'italic',\r\n    'underline',\r\n    'strike',\r\n    'blockquote',\r\n    'list',\r\n    'bullet',\r\n    'indent',\r\n    'link',\r\n    'image',\r\n    'align',\r\n    'color',\r\n    'background',\r\n  ];\r\n\r\n  return (\r\n    <Container>\r\n      <hr\r\n        style={{\r\n          width: '100%',\r\n          margin: '30px 0px',\r\n          marginTop: '50px',\r\n          display: 'block',\r\n          borderColor: '#ffffff',\r\n        }}\r\n      />\r\n      <ListContainer>\r\n        <TitleInput onChange={getTitle} value={title} />\r\n        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n          <div style={{ paddingLeft: '5px', lineHeight: '31.6px' }}>과제 기한</div>\r\n          <div>\r\n            <RangePicker\r\n              showTime={{\r\n                hideDisabledOptions: true,\r\n                defaultValue: [moment('00:00:00', 'HH:mm:ss'), moment('23:59:59', 'HH:mm:ss')],\r\n              }}\r\n              format=\"YYYY-MM-DD HH:mm:ss\"\r\n              onChange={onChangePeriod}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between', margin: '5px 0' }}>\r\n          <div style={{ paddingLeft: '5px', lineHeight: '41.6px' }}>배점</div>\r\n          <ScoreInput\r\n            type=\"number\"\r\n            onChange={(e) => setScore(e.target.value)}\r\n            value={assignmentScore}\r\n          />\r\n        </div>\r\n        <hr\r\n          style={{\r\n            width: '100%',\r\n            margin: '30px 0px',\r\n            marginTop: '50px',\r\n            display: 'block',\r\n            borderColor: '#ffffff',\r\n          }}\r\n        />\r\n        <div>과제 파일 선택 </div>\r\n        <form name=\"planfile\" encType=\"multipart/form-data\" onSubmit={onSubmit}>\r\n          <input style={{ margin: '5px' }} type=\"file\" onChange={onFileChange} />\r\n        </form>\r\n        <ReactQuill\r\n          style={{ height: '650px' }}\r\n          theme=\"snow\"\r\n          modules={modules}\r\n          formats={format}\r\n          value={content}\r\n          onChange={(content, delta, source, editor) => handleText(editor.getHTML())}\r\n        />\r\n        <WriteAcitonButtonBlock>\r\n          <StyledButton cyan onClick={onSubmit}>\r\n            과제 및 시험 수정\r\n          </StyledButton>\r\n          <StyledButton onClick={onCancel}>취소</StyledButton>\r\n        </WriteAcitonButtonBlock>\r\n      </ListContainer>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default withRouter(UpdateAssignment);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AACA;AASA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AADA;AAIA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AARA;AAYA;AAiBA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AALA;AADA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAFA;AAIA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAaA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AACA;AACA;AACA;AALA;AADA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJA;AAAA;AAAA;AAAA;AAAA;AA5CA;AAAA;AAAA;AAAA;AAAA;AAVA;AAAA;AAAA;AAAA;AAAA;AA+DA;AACA;AAvLA;AACA;AADA;AAwLA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}