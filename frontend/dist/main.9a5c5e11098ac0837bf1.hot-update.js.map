{"version":3,"file":"main.9a5c5e11098ac0837bf1.hot-update.js","sources":["/mnt/e/sw_capstone/frontend/src/Component/Login/LoginCheck.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Container, Row, Col, Modal, ModalBody, ModalFooter, ModalHeader } from 'reactstrap';\r\nimport axios from 'axios';\r\nimport { useHistory } from 'react-router';\r\nimport MainLogo from '../../img/OneBoardLogo.png';\r\nconst LoginCheck = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [isLogined, setIsLogined] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [getAlert, setGetAlert] = useState({ flag: false, message: '' });\r\n\r\n  const enterEvent = (e) => {\r\n    if (e.key === 'Enter') {\r\n      onSubmit();\r\n    }\r\n  };\r\n\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem('email')) {\r\n      setIsLogined(true);\r\n    } else {\r\n      setIsLogined(false);\r\n    }\r\n    setGetAlert({ flag: false, message: '' });\r\n  }, []);\r\n\r\n  const onChangehandler = (e) => {\r\n    let { name, value } = e.target;\r\n    if (name === 'email') {\r\n      setEmail(value);\r\n    } else if (name === 'password') {\r\n      setPassword(value);\r\n    } else if (value === '') {\r\n      setEmail('');\r\n      setPassword('');\r\n    }\r\n  };\r\n\r\n  const onSubmit = async (e) => {\r\n    let data = {\r\n      email: email,\r\n      password: password,\r\n    };\r\n    await axios\r\n      .post('/auth/login', data)\r\n      .then((res) => {\r\n        if (res.data.result === 'FAIL') {\r\n          setIsLogined(false);\r\n          setGetAlert({\r\n            flag: true,\r\n            message: '아이디 혹은 비밀번호가 틀렸거나 없는 사용자 입니다.',\r\n          });\r\n          setTimeout(() => {\r\n            setGetAlert({ flag: false, message: '' });\r\n          }, 1500);\r\n        }\r\n\r\n        try {\r\n          setIsLogined(true);\r\n          localStorage.setItem('token', res.data.data.token);\r\n          localStorage.setItem('email', res.data.data.email);\r\n          const token = localStorage.getItem('token');\r\n          console.log(token);\r\n          axios\r\n            .get('/user', { headers: { 'X-AUTH-TOKEN': `${token}` } })\r\n            .then((res) => {\r\n              const info = res.data.data;\r\n              console.log('userinfo : ' + info);\r\n              localStorage.setItem('userInfo', JSON.stringify(info));\r\n            })\r\n            .catch((e) => {\r\n              console.log(e);\r\n            });\r\n\r\n          setGetAlert({\r\n            flag: true,\r\n            message: '로그인 되었습니다! OneBoard에 오신것을 환영합니다',\r\n          });\r\n          setTimeout(() => {\r\n            history.push('/Main/Home');\r\n          }, 1500);\r\n        } catch (error) {\r\n          setError(error.message);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        setGetAlert({\r\n          flag: true,\r\n          message: '아이디 혹은 비밀번호가 틀렸거나 없는 사용자 입니다.',\r\n        });\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div style={{ marginTop: '1.2rem' }}>\r\n      <center>\r\n        <div>\r\n          <img src={MainLogo} style={{ width: '40%', height: '200px' }} />\r\n        </div>\r\n      </center>\r\n      <Row>\r\n        <center>\r\n          <Col className=\"InputContainer\">\r\n            <input\r\n              style={{\r\n                borderRadius: '7px',\r\n                width: '40%',\r\n                height: '80px',\r\n                fontSize: '2rem',\r\n                marginTop: '5rem',\r\n                paddingLeft: '10px',\r\n              }}\r\n              className=\"signInInput\"\r\n              name=\"email\"\r\n              type=\"email\"\r\n              placeholder=\"ID\"\r\n              required\r\n              value={localStorage.getItem('email')}\r\n              onChange={(e) => onChangehandler(e)}\r\n              onKeyPress={(e) => enterEvent(e)}\r\n            />\r\n          </Col>\r\n          <Col className=\"InputContainer\">\r\n            <input\r\n              style={{\r\n                marginTop: '15px',\r\n                borderRadius: '7px',\r\n                width: '40%',\r\n                height: '80px',\r\n                fontSize: '2rem',\r\n                paddingLeft: '10px',\r\n              }}\r\n              className=\"signInInput\"\r\n              name=\"password\"\r\n              type=\"password\"\r\n              placeholder=\"Password\"\r\n              required\r\n              value={password}\r\n              onKeyPress={(e) => enterEvent(e)}\r\n              onChange={(e) => onChangehandler(e)}\r\n            />\r\n          </Col>\r\n\r\n          <Col className=\"SignInBtnContainer\">\r\n            <button\r\n              style={{\r\n                marginTop: '3rem',\r\n                borderRadius: '7px',\r\n                width: '40%',\r\n                height: '80px',\r\n                fontSize: '1.5rem',\r\n                backgroundColor: '#E6F4F1',\r\n                color: 'black',\r\n                fontWeight: 'bold',\r\n                cursor: 'pointer',\r\n              }}\r\n              className=\"DoSignIn\"\r\n              onClick={(e) => onSubmit(e)}\r\n            >\r\n              로그인\r\n            </button>\r\n          </Col>\r\n        </center>\r\n      </Row>\r\n      <ModalBody style={{ height: '90px' }}>\r\n        <div\r\n          style={{\r\n            textAlign: 'center',\r\n            marginTop: '4%',\r\n            marginBottom: '8%',\r\n            fontFamily: 'NanumSquare_acR',\r\n            fontWeight: 'bold',\r\n            fontSize: '18px',\r\n            height: '50px',\r\n          }}\r\n        >\r\n          {getAlert.message}\r\n        </div>\r\n      </ModalBody>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginCheck;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAGA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAoBA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAqBA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAWA;AACA;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AA1CA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAgEA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAtEA;AAAA;AAAA;AAAA;AAAA;AAuFA;AACA;AArLA;AAaA;;;AAbA;AAsLA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}