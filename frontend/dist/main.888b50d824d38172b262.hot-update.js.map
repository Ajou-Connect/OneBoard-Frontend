{"version":3,"file":"main.888b50d824d38172b262.hot-update.js","sources":["/mnt/f/SW_Capstone/frontend/src/zoomtest/test.css","/mnt/f/SW_Capstone/frontend/src/zoomtest/TestZoom.tsx","webpack:///./src/zoomtest/test.css?ecf6"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#canvas0 {\\r\\n  background-color: #222222;\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n}\\r\\n\\r\\n#canvas1 {\\r\\n  background-color: #222222;\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\n#canvas3 {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\nbutton {\\r\\n  display: block;\\r\\n}\\r\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://src/zoomtest/test.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,yBAAyB;EACzB,WAAW;EACX,YAAY;AACd;;AAEA;EACE,yBAAyB;EACzB,aAAa;EACb,uBAAuB;EACvB,mBAAmB;AACrB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,cAAc;AAChB\",\"sourcesContent\":[\"#canvas0 {\\r\\n  background-color: #222222;\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n}\\r\\n\\r\\n#canvas1 {\\r\\n  background-color: #222222;\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\n#canvas3 {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\nbutton {\\r\\n  display: block;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import React, {\n  useEffect,\n  useContext,\n  useState,\n  useCallback,\n  useReducer,\n} from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport ZoomVideo, { ConnectionState } from \"@zoom/videosdk\";\nimport { message, Modal } from \"antd\";\nimport \"antd/dist/antd.css\";\nimport produce from \"immer\";\nimport Home from \"../ZoomSample/feature/home/home\";\nimport Video from \"../ZoomSample/feature/video/video\";\nimport VideoSingle from '../ZoomSample/feature/video/video-single';\nimport Preview from \"../ZoomSample/feature/preview/preview\";\nimport ZoomContext from \"../ZoomSample/context/zoom-context\";\nimport ZoomMediaContext from \"../ZoomSample/context/media-context\";\nimport ChatContext from \"../ZoomSample/context/chat-context\";\nimport LoadingLayer from \"../ZoomSample/component/loading-layer\";\nimport Chat from \"../ZoomSample/feature/chat/chat\";\nimport { ChatClient, MediaStream } from \"../index-types\";\nimport \"./test.css\";\nimport { generateVideoToken } from \"../ZoomSample/utils/util\";\n\n\nconst mediaShape = {\n  audio: {\n    encode: false,\n    decode: false,\n  },\n  video: {\n    encode: false,\n    decode: false,\n  },\n  share: {\n    encode: false,\n    decode: false,\n  },\n};\nconst mediaReducer = produce((draft, action) => {\n  switch (action.type) {\n    case \"audio-encode\": {\n      draft.audio.encode = action.payload;\n      break;\n    }\n    case \"audio-decode\": {\n      draft.audio.decode = action.payload;\n      break;\n    }\n    case \"video-encode\": {\n      draft.video.encode = action.payload;\n      break;\n    }\n    case \"video-decode\": {\n      draft.video.decode = action.payload;\n      break;\n    }\n    case \"share-encode\": {\n      draft.share.encode = action.payload;\n      break;\n    }\n    case \"share-decode\": {\n      draft.share.decode = action.payload;\n      break;\n    }\n    default:\n      break;\n  }\n}, mediaShape);\n\nfunction App() {\n  const [loading, setIsLoading] = useState(true);\n  const [loadingText, setLoadingText] = useState(\"\");\n  const [isFailover, setIsFailover] = useState<boolean>(false);\n  const [status, setStatus] = useState<string>(\"closed\");\n  const [mediaState, dispatch] = useReducer(mediaReducer, mediaShape);\n  const [mediaStream, setMediaStream] = useState<MediaStream | null>(null);\n  const [chatClient, setChatClient] = useState<ChatClient | null>(null);\n  const [isSupportGalleryView, setIsSupportGalleryView] = useState<boolean>(true);\n  const zmClient = useContext(ZoomContext);\n  const token = generateVideoToken(\n    \"MoRylmD2jBq9NfbZXbSVmvZcGYOFkDCeJc3e\",\n    \"NewabYwGXIFrOlPRf4dZBKeqFECESIkdlLrq\",\n    \"test\",\n    \"\",\n    \"jack\",\n    \"jack4\"\n      );\n  useEffect(() => {\n    const init = async () => {\n      await zmClient.init(\"en-US\", `${window.location.origin}/lib`, 'zoom.us');\n      try {\n        setLoadingText(\"Joining the session...\");\n        await zmClient.join(\"test\", token, \"동현\", \"\");\n        const stream = zmClient.getMediaStream();\n        setMediaStream(stream);\n\t      setIsSupportGalleryView(stream.isSupportMultipleVideos());\n        const chatClient = zmClient.getChatClient();\n        setChatClient(chatClient);\n        setIsLoading(false);\n      } catch (e) {\n        setIsLoading(false);\n        message.error(e.reason);\n      }\n    };\n    init();\n    return () => {\n      ZoomVideo.destroyClient();\n    };\n  }, [zmClient]);\n  const onConnectionChange = useCallback(\n    (payload) => {\n      if (payload.state === ConnectionState.Reconnecting) {\n        setIsLoading(true);\n        setIsFailover(true);\n        setStatus(\"connecting\");\n        const { reason } = payload;\n        if (reason === \"failover\") {\n          setLoadingText(\"Session Disconnected,Try to reconnect\");\n        }\n      } else if (payload.state === ConnectionState.Connected) {\n        setStatus(\"connected\");\n        if (isFailover) {\n          setIsLoading(false);\n        }\n      } else if (payload.state === ConnectionState.Closed) {\n        setStatus(\"closed\");\n        if (payload.reason === \"ended by host\") {\n          Modal.warning({\n            title: \"Meeting ended\",\n            content: \"This meeting has been ended by host\",\n          });\n        }\n      }\n    },\n    [isFailover]\n  );\n  const onMediaSDKChange = useCallback((payload) => {\n    const { action, type, result } = payload;\n    dispatch({ type: `${type}-${action}`, payload: result === \"success\" });\n  }, []);\n  const onLeaveOrJoinSession = useCallback(async () => {\n    if (status === \"closed\") {\n      setIsLoading(true);\n      await zmClient.join(\"test\", token, \"동현\", \"\");\n      setIsLoading(false);\n    } else if (status === \"connected\") {\n      await zmClient.leave();\n      message.warn(\"You have left the session.\");\n    }\n  }, [zmClient, status]);\n  useEffect(() => {\n    zmClient.on(\"connection-change\", onConnectionChange);\n    zmClient.on(\"media-sdk-change\", onMediaSDKChange);\n    return () => {\n      zmClient.off(\"connection-change\", onConnectionChange);\n      zmClient.off(\"media-sdk-change\", onMediaSDKChange);\n    };\n  }, [zmClient, onConnectionChange, onMediaSDKChange]);\n  return (\n    <div className=\"App\">\n      {loading && <LoadingLayer content={loadingText} />}\n      {!loading && (\n        <ZoomMediaContext.Provider value={{ ...mediaState, mediaStream }}>\n          <ChatContext.Provider value={chatClient}>\n            <Router>\n              <Switch>\n                <Route\n                  path=\"/class/pf\"\n                  render={(props) => (\n                    <Home\n                      {...props}\n                      status={status}\n                      onLeaveOrJoinSession={onLeaveOrJoinSession}\n                    />\n                  )}\n                  exact\n                />\n                <Route\n                  path=\"/index.html\"\n                  render={(props) => (\n                    <Home\n                      {...props}\n                      status={status}\n                      onLeaveOrJoinSession={onLeaveOrJoinSession}\n                    />\n                  )}\n                  exact\n                />\n                <Route\n                  path=\"/preview\"\n                  component={Preview}\n                />\n                <Route path=\"/video\" component={isSupportGalleryView ? Video : VideoSingle} />\n                <Route path=\"/chat\" component={Chat} />\n              </Switch>\n            </Router>\n          </ChatContext.Provider>\n        </ZoomMediaContext.Provider>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","var api = require(\"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!../../node_modules/postcss-loader/src/index.js??postcss!./test.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\nif (module.hot) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = function isEqualLocals(a, b, isNamedExport) {\n  if (!a && b || a && !b) {\n    return false;\n  }\n\n  var p;\n\n  for (p in a) {\n    if (isNamedExport && p === 'default') {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n\n    if (a[p] !== b[p]) {\n      return false;\n    }\n  }\n\n  for (p in b) {\n    if (isNamedExport && p === 'default') {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n\n    if (!a[p]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n    var oldLocals = content.locals;\n\n    module.hot.accept(\n      \"!!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!../../node_modules/postcss-loader/src/index.js??postcss!./test.css\",\n      function () {\n        content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!../../node_modules/postcss-loader/src/index.js??postcss!./test.css\");\n\n              content = content.__esModule ? content.default : content;\n\n              if (typeof content === 'string') {\n                content = [[module.id, content, '']];\n              }\n\n              if (!isEqualLocals(oldLocals, content.locals)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = content.locals;\n\n              update(content);\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    update();\n  });\n}\n\nmodule.exports = content.locals || {};"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;AAGA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AATA;AAcA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AA1BA;AA4BA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAQA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAEA;AACA;AAGA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAMA;AATA;AAAA;AAAA;AAAA;AAAA;AAYA;AACA;AAGA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAMA;AATA;AAAA;AAAA;AAAA;AAAA;AAYA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA5BA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA;AA0CA;AACA;AArIA;AACA;AADA;AAsIA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}