{"version":3,"file":"main.f87780f93ae76bfee5ad.hot-update.js","sources":["/mnt/e/sw_capstone/frontend/src/Pages/LecturePages/Attendance/StudentAttendance.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport axios from 'axios';\r\n\r\nconst Container = styled.div`\r\n  width: 97%;\r\n  display: block;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin: 10px auto;\r\n  padding: 0 20px;\r\n`;\r\nconst Title = styled.div`\r\n  margin-top: 1.5rem;\r\n  margin-left: 20px;\r\n  font-size: 30px;\r\n  border-bottom: 1px solid #f7f9fc;\r\n  height: 40px;\r\n  line-height: 40px;\r\n  font-weight: bold;\r\n`;\r\n\r\nconst SubTitle = styled.div`\r\n  font-size: 20px;\r\n  border-bottom: 1px solid #f7f9fc;\r\n  height: 30px;\r\n  line-height: 30px;\r\n  text-align: left;\r\n  margin-left: 20px;\r\n`;\r\n\r\nconst Btn = styled.button`\r\n  padding: 5px;\r\n  background-color: rgba(215, 226, 185, 0.596);\r\n  color: #3e3e3e;\r\n  border-radius: 7px;\r\n  &:hover {\r\n    background-color: #bfbfbf;\r\n  }\r\n`;\r\n\r\nconst TabletrColor = styled.tr`\r\n  &:nth-child(even) {\r\n    background: #f7f9fc;\r\n  }\r\n`;\r\nconst StudentAttendance = (props) => {\r\n  const token = localStorage.getItem('token');\r\n  const lectureId = props.lectureId;\r\n  const [attendances, setAttendances] = useState({\r\n    attendanceList: [],\r\n    studentId: 0,\r\n    studentName: '',\r\n    studentNumber: '',\r\n  });\r\n  const [error, setError] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [lectureInfo, setLectureInfo] = useState({});\r\n  useEffect(() => {\r\n    const fetchAttendance = async () => {\r\n      try {\r\n        setError(null);\r\n        setLoading(true);\r\n        await axios\r\n          .get(`/lecture/${lectureId}/attendances/my`, { headers: { 'X-AUTH-TOKEN': `${token}` } })\r\n          .then((res) => {\r\n            const result = res.data.data;\r\n            setAttendances(result);\r\n            console.log(result);\r\n          })\r\n          .catch((e) => {\r\n            console.log(e);\r\n            setError(e);\r\n          });\r\n        await axios\r\n          .get(`/lecture/${lectureId}`)\r\n          .then((result) => {\r\n            const data = result.data.data;\r\n            setLectureInfo(data);\r\n            console.log(data);\r\n          })\r\n          .catch((e) => {\r\n            console.log(e);\r\n          });\r\n        setLoading(false);\r\n      } catch (e) {\r\n        setError(e);\r\n        console.log(e);\r\n      }\r\n    };\r\n    fetchAttendance();\r\n  }, []);\r\n\r\n  if (loading)\r\n    return (\r\n      <div\r\n        style={{\r\n          textAlign: 'center',\r\n          fontSize: '30px',\r\n          fontStyle: 'italic',\r\n          fontWeight: 'bold',\r\n        }}\r\n      >\r\n        로딩중 ...\r\n      </div>\r\n    );\r\n\r\n  if (error)\r\n    return (\r\n      <div\r\n        style={{\r\n          textAlign: 'center',\r\n          fontSize: '30px',\r\n          fontStyle: 'italic',\r\n          fontWeight: 'bold',\r\n        }}\r\n      >\r\n        에러가 발생했습니다. 출석정보를 불러올수 없습니다.\r\n      </div>\r\n    );\r\n\r\n  return (\r\n    <div>\r\n      <Title>개인 출석부</Title>\r\n      <hr style={{ width: '100%', margin: '10px 0px', display: 'block', borderColor: '#ffffff' }} />\r\n      <SubTitle style={{ display: 'flex', marginLeft: '20px' }}>\r\n        이름 : {attendances.studentName} 학번 : {attendances.studentNumber}\r\n      </SubTitle>\r\n      <hr style={{ width: '100%', margin: '10px 0px', display: 'block', borderColor: '#ffffff' }} />\r\n      <SubTitle>{lectureInfo.title}</SubTitle>\r\n      <hr style={{ width: '100%', margin: '10px 0px', display: 'block', borderColor: '#ffffff' }} />\r\n\r\n      <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n        <div style={{ paddingRight: '10px', fontSize: '20px', color: '#22CE41' }}>\r\n          {attendances.attendanceList.filter((list) => list.status === 2).length}회 출석\r\n        </div>\r\n        <div style={{ paddingRight: '10px', fontSize: '20px', color: '#ECB807' }}>\r\n          / {attendances.attendanceList.filter((list) => list.status === 1).length} 회 지각\r\n        </div>\r\n        <div style={{ paddingRight: '10px', fontSize: '20px', color: 'red' }}>\r\n          / {attendances.attendanceList.filter((list) => list.status === 0).length} 회 결석\r\n        </div>\r\n      </div>\r\n      <hr style={{ width: '100%', margin: '10px 0px', display: 'block', borderColor: '#ffffff' }} />\r\n      <table style={{ width: '100%', borderTop: '1px solid #D5D5D5', textAlign: 'center' }}>\r\n        <thead\r\n          style={{\r\n            borderBottom: '1px solid #D5D5D5',\r\n            fontStyle: 'bold',\r\n            fontWeight: '500',\r\n            backgroundColor: '#f3f3f3',\r\n          }}\r\n        >\r\n          <tr>\r\n            <th style={{ padding: '10px 0', width: '10%' }}>회차</th>\r\n            <th style={{ padding: '10px 0', width: '40%' }}>수강 날짜</th>\r\n            <th style={{ padding: '10px 0', width: '20%' }}>출결 상태</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {attendances.attendanceList.map((list, index) => (\r\n            <TabletrColor key={index}>\r\n              <td style={{ padding: '15px 0', borderBottom: '1px solid #D5D5D5' }}>{index + 1}</td>\r\n              <td style={{ padding: '15px 0', borderBottom: '1px solid #D5D5D5' }}>\r\n                {list.lessonDate}\r\n              </td>\r\n              <td style={{ padding: '15px 0', borderBottom: '1px solid #D5D5D5' }}>\r\n                {list.status === 2 ? (\r\n                  <div style={{ color: '#22CE41', fontWeight: 'bold' }}>출석</div>\r\n                ) : list.status === 1 ? (\r\n                  <div style={{ color: '#ECB807', fontWeight: 'bold' }}>지각</div>\r\n                ) : (\r\n                  <div style={{ color: 'red', fontWeight: 'bold' }}>결석</div>\r\n                )}\r\n              </td>\r\n            </TabletrColor>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n      <hr style={{ width: '100%', margin: '10px 0px', display: 'block', borderColor: '#ffffff' }} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StudentAttendance;\r\n"],"mappings":"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","sourceRoot":""}